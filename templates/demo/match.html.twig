{% extends 'base.html.twig' %}

{% block title %}DÃ©mo avec Expression Match (PHP 8+){% endblock %}

{% block body %}

<div class="example-wrapper">
    <h1>ğŸ”„ DÃ©mo avec Expression Match (PHP 8+)</h1>
    
    {{ include('demo/_navigation.html.twig') }}
    
    <div class="method-info">
        <h3>ğŸ”„ Approche moderne avec Expression Match</h3>
        <p><strong>MÃ©thode utilisÃ©e :</strong> {{ method }} (PHP 8+)</p>
        <p>Cette approche utilise l'expression <code>match</code> de PHP 8+ pour une syntaxe plus moderne :</p>
        <div class="code-example">
return match (strtolower($cereal)) {
    'ble' => $this->analyserBle($cereal),
    'orge' => $this->analyserOrge($cereal),
    'tournesol' => $this->analyserTournesol($cereal),
    default => throw new InvalidArgumentException(...),
};
        </div>
        
        <div style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 6px; border-left: 4px solid #6c757d;">
            <h4 style="color: #495057; margin-bottom: 10px;">ğŸ“ Code Source</h4>
            <p style="color: #6c757d; margin-bottom: 10px;">Consultez le code complet sur GitHub :</p>
            <a href="https://github.com/yoanbernabeu/Design-Pattern-avec-Symfony---Strategy/blob/main/src/Service/Match/CerealAnalyseMatchService.php" 
               target="_blank" 
               style="color: #007bff; text-decoration: none; font-weight: bold;">
                ğŸ”— CerealAnalyseMatchService.php
            </a>
        </div>
    </div>

    {% for analysis in analyses %}
        <div class="cereal-card">
            <div class="cereal-name">{{ analysis.cereal }}</div>
            
            {% if analysis.success %}
                <div class="analysis-result match">
                    <strong>RÃ©sultat de l'analyse :</strong><br>
                    {{ analysis.analyse }}
                </div>
            {% else %}
                <div class="error">
                    <strong>Erreur :</strong> {{ analysis.error }}
                </div>
            {% endif %}
        </div>
    {% endfor %}

    <div class="match-advantages-section">
        <h3>âš ï¸ Avantages et InconvÃ©nients de Match</h3>
        
        <h4>âœ… Avantages de l'expression Match :</h4>
        <ul>
            <li><strong>Syntaxe moderne :</strong> Plus lisible que les if/else</li>
            <li><strong>Expression :</strong> Retourne directement une valeur</li>
            <li><strong>ExhaustivitÃ© :</strong> Garantit qu'on couvre tous les cas</li>
            <li><strong>Performance :</strong> OptimisÃ©e par PHP</li>
        </ul>
        
        <h4>âŒ InconvÃ©nients de l'expression Match :</h4>
        <ul>
            <li><strong>Violation du principe ouvert/fermÃ© :</strong> Toujours besoin de modifier le code pour ajouter un cas</li>
            <li><strong>MaintenabilitÃ© limitÃ©e :</strong> Toute la logique reste concentrÃ©e</li>
            <li><strong>TestabilitÃ© :</strong> Difficile de tester chaque cas individuellement</li>
            <li><strong>ExtensibilitÃ© :</strong> Chaque nouveau type nÃ©cessite une modification</li>
        </ul>
    </div>

    {{ include('demo/_comparison_table.html.twig') }}

    <div class="alternatives-section">
        <h3>ğŸ’¡ Conclusion</h3>
        <p><strong>L'expression <code>match</code> est une amÃ©lioration par rapport aux <code>if/else</code> :</strong></p>
        <ul>
            <li>âœ… Syntaxe plus moderne et lisible</li>
            <li>âœ… Expression (retourne une valeur)</li>
            <li>âœ… ExhaustivitÃ© garantie</li>
            <li>âš ï¸ Mais toujours les mÃªmes problÃ¨mes fondamentaux que les if/else</li>
        </ul>
        
        <p><strong>Le Design Pattern Strategy reste la meilleure solution pour :</strong></p>
        <ul>
            <li>ğŸ¯ Respecter les principes SOLID</li>
            <li>ğŸ”§ Faciliter la maintenance et l'extension</li>
            <li>ğŸ§ª AmÃ©liorer la testabilitÃ©</li>
            <li>ğŸ“ˆ Permettre l'Ã©volution du code sans modification</li>
            <li>âš¡ S'intÃ©grer parfaitement avec Symfony</li>
        </ul>
        
        <p><strong>â†’ <a href="{{ path('app_demo_if') }}">Voir la version If/Else</a> | 
        <a href="{{ path('app_demo_pattern') }}">Voir la version Strategy Pattern</a></strong></p>
    </div>
</div>
{% endblock %}
